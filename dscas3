#!/usr/bin/env python
import sys
import Tkinter
import tkMessageBox
from Tkconstants import *
import Pmw

from graph_editor import graph_editor
from module_manager import module_manager

class dscas3_main:
    def __init__(self, root):
	self.root = root
	self.root.title("dscas 3")
	# quit gets called if window gets closed
	self.root.protocol ("WM_DELETE_WINDOW", self.quit)
	
	# interpreter input line
	self.pyco = Pmw.ComboBox(self.root, label_text = 'Python', labelpos = 'nw', selectioncommand=self.pyco_exec)
	self.pyco.pack(side=TOP, fill=X)

	# button box
	box = Pmw.ButtonBox(self.root)
	box.add('Quit', underline=0, command=self.quit)
	box.pack(side=TOP, fill=X, expand=1)
	
	# this will instantiate the module manager and get a list of plugins
	self.module_manager = module_manager()
	# then start up a default graph_editor
	self.graph_editor = graph_editor(self)
	
	
    def get_module_manager(self):
	return self.module_manager
	
    def pyco_exec(self, py_command):
	modules = self.module_manager.get_modules()
	exec(py_command)
  	
    def quit(self):
	print "quit called!"
	# take care of main window
	self.root.destroy()
	

# create main window
root = Tkinter.Tk()
Pmw.initialise(root, fontScheme = 'pmw1')
dscas3_main(root)
# start event loop of main window
root.mainloop()

